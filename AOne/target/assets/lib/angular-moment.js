"format global";"deps angular";"deps moment";(function(){"use strict";function e(e,t){return e.module("angularMoment",[]).constant("angularMomentConfig",{preprocess:null,timezone:"",format:null,statefulFilters:true}).constant("moment",t).constant("amTimeAgoConfig",{withoutSuffix:false,serverTime:null,titleFormat:null}).directive("amTimeAgo",["$window","moment","amMoment","amTimeAgoConfig","angularMomentConfig",function(t,n,r,i,s){return function(o,u,a){function w(){var e;if(i.serverTime){var t=(new Date).getTime();var r=t-d+i.serverTime;e=n(r)}else{e=n()}return e}function E(){if(f){t.clearTimeout(f);f=null}}function S(e){u.text(e.from(w(),h));if(p&&!u.attr("title")){u.attr("title",e.local().format(p))}if(!g){var n=Math.abs(w().diff(e,"minute"));var r=3600;if(n<1){r=1}else if(n<60){r=30}else if(n<180){r=300}f=t.setTimeout(function(){S(e)},r*1e3)}}function x(e){if(y){u.attr("datetime",e)}}function T(){E();if(l){var e=r.preprocessDate(l,v,c);S(e);x(e.toISOString())}}var f=null;var l;var c=s.format;var h=i.withoutSuffix;var p=i.titleFormat;var d=(new Date).getTime();var v=s.preprocess;var m=a.amTimeAgo.replace(/^::/,"");var g=a.amTimeAgo.indexOf("::")===0;var y="TIME"===u[0].nodeName.toUpperCase();var b;b=o.$watch(m,function(e){if(typeof e==="undefined"||e===null||e===""){E();if(l){u.text("");x("");l=null}return}l=e;T();if(e!==undefined&&g){b()}});if(e.isDefined(a.amWithoutSuffix)){o.$watch(a.amWithoutSuffix,function(e){if(typeof e==="boolean"){h=e;T()}else{h=i.withoutSuffix}})}a.$observe("amFormat",function(e){if(typeof e!=="undefined"){c=e;T()}});a.$observe("amPreprocess",function(e){v=e;T()});o.$on("$destroy",function(){E()});o.$on("amMoment:localeChanged",function(){T()})}}]).service("amMoment",["moment","$rootScope","$log","angularMomentConfig",function(t,n,r,i){this.preprocessors={utc:t.utc,unix:t.unix};this.changeLocale=function(r){var i=t.locale(r);if(e.isDefined(r)){n.$broadcast("amMoment:localeChanged")}return i};this.preprocessDate=function(n,s,o){if(e.isUndefined(s)){s=i.preprocess}if(this.preprocessors[s]){return this.preprocessors[s](n,o)}if(s){r.warn("angular-moment: Ignoring unsupported value for preprocess: "+s)}if(!isNaN(parseFloat(n))&&isFinite(n)){return t(parseInt(n,10))}return t(n,o)};this.applyTimezone=function(e){var t=i.timezone;if(e&&t){if(e.tz){e=e.tz(t)}else{r.warn("angular-moment: timezone specified but moment.tz() is undefined. Did you forget to include moment-timezone.js?")}}return e}}]).filter("amCalendar",["moment","amMoment","angularMomentConfig",function(e,t,n){function r(n,r){if(typeof n==="undefined"||n===null){return""}n=t.preprocessDate(n,r);var i=e(n);if(!i.isValid()){return""}return t.applyTimezone(i).calendar()}r.$stateful=n.statefulFilters;return r}]).filter("amDateFormat",["moment","amMoment","angularMomentConfig",function(e,t,n){function r(n,r,i){if(typeof n==="undefined"||n===null){return""}n=t.preprocessDate(n,i);var s=e(n);if(!s.isValid()){return""}return t.applyTimezone(s).format(r)}r.$stateful=n.statefulFilters;return r}]).filter("amDurationFormat",["moment","angularMomentConfig",function(e,t){function n(t,n,r){if(typeof t==="undefined"||t===null){return""}return e.duration(t,n).humanize(r)}n.$stateful=t.statefulFilters;return n}]).filter("amTimeAgo",["moment","amMoment","angularMomentConfig",function(e,t,n){function r(n,r,i){if(typeof n==="undefined"||n===null){return""}n=t.preprocessDate(n,r);var s=e(n);if(!s.isValid()){return""}return t.applyTimezone(s).fromNow(i)}r.$stateful=n.statefulFilters;return r}])}if(typeof define==="function"&&define.amd){define("angular-moment",["angular","moment"],e)}else if(typeof module!=="undefined"&&module&&module.exports){e(angular,require("moment"))}else{e(angular,window.moment)}})()